(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[82599],{986782:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(667294),i=n(79292),s=n(415787);function o(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a extends r.Component{constructor(...e){super(...e),o(this,"state",{error:null,info:null}),o(this,"resetError",()=>{this.setState({error:null,info:null})})}componentDidCatch(e,t){try{let{name:t}=this.props,n=this.props.type||"secondary";(0,i.T)({extraData:e.extraData??{},errorBoundary:t,errorBoundaryType:n,message:e.message,name:e.name,stack:e.stack}),(0,s.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,s.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}render(){let{renderErrorState:e}=this.props,{error:t,info:n}=this.state;return t&&n?e?e({error:t,info:n,resetError:this.resetError}):null:this.props.children}}},983272:(e,t,n)=>{"use strict";function r(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:()=>o});let i=new class{constructor(){r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}setExperiment(e=!1){this.inExp=e}onSessionResume(e){return this.onResumeListeners.push(e),this}onSessionPause(e){return this.onPauseListeners.push(e),this}removeResumeListener(e){this.onResumeListeners.filter(t=>t!==e)}removePauseListener(e){this.onPauseListeners=this.onPauseListeners.filter(t=>t!==e)}getAppState(){return this.windowInFocus?0:void 0}},s=e=>{if(e.isHidden){let{reason:t}=e;i.windowInFocus=!1,i.onPauseListeners.forEach(e=>e(t))}else i.windowInFocus=!0,i.onResumeListeners.forEach(e=>e())};setTimeout(()=>{window.addEventListener("beforeunload",()=>s({isHidden:!0,reason:"beforeunload"})),window.addEventListener("focus",()=>s({isHidden:!1})),window.addEventListener("blur",()=>s({isHidden:!0,reason:"blur"})),window.addEventListener("pageshow",()=>s({isHidden:!1})),window.addEventListener("pagehide",()=>s({isHidden:!0,reason:"pagehide"})),void 0!==document.hidden?document.addEventListener("visibilitychange",()=>s(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",()=>s(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1}),!1)},0);let o=i},708790:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let r=(0,n(667294).createContext)(null)},770975:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,S:()=>r});let{Provider:r,useMaybeHook:i}=(0,n(498490).Z)("pwtSurfaceContext")},829413:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(886132),i=n(667294),s=n(353168),o=n(770975),a=n(142921),u=n(836686);function l({children:e,isAtEndOfFeed:t,pinData:n,itemCount:l,includeBackgroundImages:d=!1,includeVideos:c=!1,includeSections:m=!1,isPlaceholderGrid:f,stopwatchSetVisuallyCompleteResult:p,stopwatchContext:g}){let{isAuthenticated:h}=(0,u.b)(),v=(0,a.Z)()?.isAuthenticated||h;v||(m=!0),(0,r.Z)({pinData:n,isAtEndOfFeed:t,includeBackgroundImages:d,includeVideos:c,includeSections:m,isPlaceholderGrid:f,stopwatchSetVisuallyCompleteResult:p,isAuth:v,stopwatchContext:g});let y=(0,o.E)(),w=(0,i.useRef)(null);return(0,i.useEffect)(()=>{l!==w.current&&(w.current=l,y&&(0,s.ZP)(s.at))},[!!y,l]),e}},301567:(e,t,n)=>{"use strict";n.d(t,{F9:()=>m,LM:()=>l,VZ:()=>s,cQ:()=>f,rZ:()=>o});var r=n(10306),i=n(248750);let s=()=>"number"==typeof window.innerHeight&&"number"==typeof window.pageYOffset&&!!document.querySelector&&!!document.querySelectorAll,o=e=>e instanceof HTMLDivElement||e instanceof HTMLVideoElement?e.getBoundingClientRect():e.parentElement instanceof HTMLElement?e.parentElement.getBoundingClientRect():null,a=({top:e,height:t},{foldY:n,pageYOffset:r})=>{let i=e+r;if(i>=n)return!1;let s=Math.min(t,n-i);return s>.5*t||s>.2*n},u=e=>{if(e instanceof HTMLImageElement)return e.src;if(e instanceof HTMLVideoElement)return e.attributes.poster.value;let t=((e.style||{}).backgroundImage||"").match(/^url\(["'](.*)["']\)$/);return t&&t[1]||null},l=()=>document.querySelector?document.querySelectorAll(r.wc).length:((0,i.H)("missing_document_query_selector"),0),d=()=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),null;let e=document.querySelectorAll(r.wc);return e[e.length-1]||null},c=(e,t)=>{let n=o(e);if(!n)return(0,i.H)("missing_client_rect"),!1;if(n.width<70&&n.height<70){if(e instanceof HTMLImageElement)return!1;let t=u(e);if(t?.endsWith("svg"))return!1}return a(n,t)},m=()=>{let e=d();if(!e)return!1;let t=window.innerHeight||0,n=window.pageYOffset||0;return e.getBoundingClientRect().top+n>=t},f=(e,t,n)=>{if(!document.querySelector)return(0,i.H)("missing_document_query_selector"),[];let s={foldY:window.innerHeight||0,pageYOffset:window.pageYOffset||0},o=[r.Wf,...e?[r.fF]:[],...t?[r.$N]:[]].join(","),a=[...document.querySelectorAll(o)];if(n){let e=[...document.querySelectorAll('div[data-test-id="board-section"]')],t=e=>{let n=[...e.children];!n.length&&e.style.backgroundImage?a.push(e):n.length&&n.forEach(e=>{t(e)})};e.forEach(e=>{t(e)})}return a.reduce((e,n)=>{if((n instanceof HTMLImageElement||n instanceof HTMLDivElement||n instanceof HTMLVideoElement&&t)&&c(n,s)){let t=u(n);if(t){let r=(t||"").replace(/.*\//,"");return e.concat([{element:n,fileName:r}])}}return e},[])}},10306:(e,t,n)=>{"use strict";n.d(t,{$N:()=>u,Kb:()=>r,Wf:()=>o,fF:()=>a,wc:()=>s});let r="pwt-grid-item",i=['div[data-grid-item="true"]',"div.Grid__Item",`div[data-test-id="${r}"]`],s=i.join(","),o=i.map(e=>`${e} img`).join(","),a=i.map(e=>`${e} div[style*=background-image]`).join(","),u=i.map(e=>`${e} video`).join(",")},886132:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_,v:()=>h});var r=n(667294),i=n(297728),s=n(630118),o=n(845729),a=n(301567),u=n(248750),l=n(353168),d=n(770975),c=n(202953),m=n(636506),f=n(438973),p=n(415787);let g=(0,o.XV)("GridProfiler"),h=()=>!!window.addEventListener&&!!window.removeEventListener&&(0,a.VZ)(),v=e=>"LAYOUT"===e.status&&500||"TIMING"===e.status&&100||null,y=(e,t)=>{if(!t){let t=(0,a.LM)();if(t===e)return g("No new items, so skip the viewport-fill check."),{complete:!1,numOfItemsChecked:e};if(!(0,a.F9)())return g("Viewport may not be filled yet."),{complete:!1,numOfItemsChecked:t}}return{complete:!0}},w=(e,t)=>{let n=0,r=0,i=0,s=0,o=0;return e=e.filter(e=>"pin"===e.type),t.forEach((t,a)=>{let u,l=t.fileName.split(".")[0];u=e[a],l!==u?.image_signature&&(u=e.find(e=>l===e?.image_signature)),void 0===u?o+=1:u.is_promoted||u.recommendation_reason?.reason==="PROMOTED_PIN"||u?.promoter?.length?i+=1:null!==u.story_pin_data_id&&void 0!==u.story_pin_data_id?n+=1:u?.videos?.video_list?r+=1:s+=1}),{storyPinCount:n,videoCount:r,adCount:i,imageCount:s,unknownCount:o}},E=(e,t)=>{let n=()=>{window.removeEventListener(e,n),t()};return window.addEventListener(e,n),()=>window.removeEventListener(e,n)};function _({isAtEndOfFeed:e,pinData:t,includeBackgroundImages:n,includeVideos:h=!1,includeSections:_,isPlaceholderGrid:b,stopwatchSetVisuallyCompleteResult:L,stopwatchContext:S,isAuth:A}){let C=(0,d.E)(),H=C?.getId()||(0,m.P9)(),I=C?.setVisuallyCompleteResult,T=({imageTimings:e})=>{L&&L(),I&&I({imageTimings:e}),(0,m.cB)(e)},[O,P]=(0,r.useState)({status:"DISABLED"}),k=(0,i.F)();(0,r.useEffect)(()=>{P({status:"LAYOUT",failedCount:0,numOfItemsChecked:0})},[H]),(0,r.useEffect)(()=>{if(g("new status",O),"LAYOUT"===O.status){let e=E("scroll",()=>{(0,l.ZP)("scrollDuringLayout")});return()=>{e()}}return()=>{}},[O.status]),(0,f.Z)(()=>{let r="unknown",i="unknown",l=()=>{},d=e=>{C?C.abort(e):S?.abort()};if(C){let{getMetricId:e}=C,t=e();i=t.surface,r=(0,s.KJ)(t),l=C.addBinaryAnnotation}else i="stopwatch",r=`${i}_${S?.name}`,S?.addBinaryAnnotation&&(l=S?.addBinaryAnnotation);let f=(0,a.cQ)(n,h,_);if(b&&!f.length){g("bypassing PWT run due to skeleton pin grid");return}switch(O.status){case"LAYOUT":{let t=y(O.numOfItemsChecked,e);t.complete?P({status:"TIMING",failedCount:0,pinElements:f}):500*O.failedCount>6e4?((0,u.A9)(`images.${r}.visuallyComplete.maxLayoutAttempt`),d("visuallyComplete_layoutTimeout"),(0,m.JG)("visuallyComplete_layoutTimeout"),P({status:"DISABLED"})):P({...O,failedCount:O.failedCount+1,numOfItemsChecked:t.numOfItemsChecked});break}case"TIMING":{let e=(0,c.Cg)(),n=O.pinElements.length,s=[],a=0,f=0,h=0,v=1/0,y=0;if(O.pinElements.forEach(({element:t,fileName:n})=>{let r=e.find(e=>e.name.endsWith(n));r?r.responseEnd?(s.push(r),(0,o.v5)(t,"green"),"search"===i&&(v=Math.min(v,r.requestStart),y=Math.max(y,r.responseEnd))):(h+=1,(0,o.v5)(t,"blue")):t instanceof HTMLImageElement&&t.complete?(f+=1,(0,o.v5)(t,"red")):(a+=1,(0,o.v5)(t,"greenyellow"))}),a||h)100*O.failedCount>6e4?((0,u.A9)(`images.${r}.visuallyComplete.maxAttempt`,{tags:{totalImageCount:n,incompleteCount:a,noTimingCount:f,noTimingResponseEndCount:h}}),d("visuallyComplete_timingTimeout"),(0,m.JG)("visuallyComplete_timingTimeout"),P({status:"DISABLED"})):P({...O,failedCount:O.failedCount+1});else{if(g(`All ${s.length} images are fetched`),t&&t.length){let e=w(t,O.pinElements);if(Object.entries(e).forEach(([e,t])=>{l(e,t,"I16"),(0,m.XJ)(e,t,"I16")}),(0,u.A9)(`${r}.pinTypes`,{tags:e}),"search"===i){let e=y-v;t[0].display_options?.num_columns_requested===0?(0,p.LY)("full_width_story_image_fetch_time_true",e,{sampleRate:1}):(0,p.LY)("full_width_story_image_fetch_time_false",e,{sampleRate:.05})}}if(A&&"search"===i){let{group:e}=k.checkExperiment("dweb_grid_loading_state");e&&(0,p.S0)("webapp.gridVisuallyComplete.loadingState",n,{sampleRate:1,tags:{group:e}})}T({imageTimings:s}),P({status:"DISABLED"}),(0,u.A9)(`images.${r}.visuallyComplete.complete`,{tags:{totalImageCount:n,noTimingCount:f}})}}}},v(O))}},142921:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(667294),i=n(708790);function s(){return(0,r.useContext)(i.Z)}},961754:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(667294),i=n(545007),s=n(786974),o=n(809833),a=n(174044);function u(e){let{enabledRouteRefresh:t,headers:n,name:u,noCache:l,options:d,schema:c}=e??{name:o.fY,options:null},m=(0,s.Z)(d),f=e=>e[u]?.[m],p=(0,i.v9)(({resources:e})=>f(e)?.nextBookmark),g=(0,i.v9)(({resources:e})=>f(e)?.data),h=(0,i.v9)(({resources:e})=>f(e)?.auxData),v=(0,i.v9)(({resources:e})=>f(e)?.error),{fetchResource:y,ref:{fetchMore:w,isFetching:E,isLoaded:_,isRefreshing:b,refresh:L}}=(0,a.Z)({enabledRouteRefresh:t,headers:n,name:u,noCache:l,options:d,schema:c},!e,!0),S=_&&!E&&p===o.qx;return(0,r.useEffect)(()=>{y()}),(0,r.useMemo)(()=>({auxData:h,data:g,error:v,fetchMore:w,isAtEnd:S,isFetching:E,isLoaded:_,isRefreshing:b,nextBookmark:p,refresh:L}),[h,g,v,w,S,E,_,b,p,L])}},438973:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(667294);let i=(e,t)=>{let n=(0,r.useRef)(()=>{});(0,r.useEffect)(()=>{n.current=e},[e]),(0,r.useEffect)(()=>{if(null===t)return()=>{};let e=setInterval(()=>n.current(),t);return()=>clearInterval(e)},[t])}},693967:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=s(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=s(t,n));return t}(n)))}return e}function s(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=(function(){return i}).apply(t,[]))||(e.exports=n)}()}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/82599-7b78f38dfbf05508.mjs.map